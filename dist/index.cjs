"use strict";var K=Object.defineProperty;var Ce=Object.getOwnPropertyDescriptor;var Ee=Object.getOwnPropertyNames;var Ie=Object.prototype.hasOwnProperty;var Re=(e,t)=>{for(var r in t)K(e,r,{get:t[r],enumerable:!0})},q=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Ee(t))!Ie.call(e,o)&&o!==r&&K(e,o,{get:()=>t[o],enumerable:!(n=Ce(t,o))||n.enumerable});return e},U=(e,t,r)=>(q(e,t,"default"),r&&q(r,t,"default"));var Ue=e=>q(K({},"__esModule",{value:!0}),e);var I={};Re(I,{ADA:()=>M,AddressD:()=>Qe,AddressSchema:()=>ne,AssetClassD:()=>Ze,AssetClassSchema:()=>V,CreateServiceRedeemer:()=>w,CreateServiceSchema:()=>se,CredentialD:()=>Ge,CredentialSchema:()=>N,MintAccountSchema:()=>ie,MintServiceRedeemer:()=>H,ONE_HOUR_MS:()=>yt,ONE_YEAR_MS:()=>gt,OutputReference:()=>ze,OutputReferenceSchema:()=>W,PROTOCOL_FEE:()=>_t,PROTOCOL_PAYMENT_KEY:()=>wt,PROTOCOL_STAKE_KEY:()=>Tt,ServiceDatum:()=>T,ServiceDatumSchema:()=>ae,TIME_TOLERANCE_MS:()=>At,TWENTY_FOUR_HOURS_MS:()=>vt,TWO_YEARS_MS:()=>St,Value:()=>et,ValueSchema:()=>oe,chunkArray:()=>Pe,createService:()=>mt,createServiceEffect:()=>xt,divCeil:()=>$e,fromAddress:()=>Ve,fromAddressToData:()=>Me,fromAssets:()=>qe,generateAccountSeedPhrase:()=>Ne,getInputUtxoIndices:()=>Xe,getServiceMultiValidator:()=>_,ok:()=>Le,parseSafeDatum:()=>te,parseUTxOsAtScript:()=>Be,remove:()=>Je,replacer:()=>je,selectUtxos:()=>We,sendTokenToService:()=>bt,sortByOutRefWithIndex:()=>re,sumUtxoAssets:()=>Ye,toAddress:()=>He,toAssets:()=>Ke,toCBORHex:()=>De,union:()=>Fe,updateService:()=>ht,utxosAtScript:()=>ee});module.exports=Ue(I);var m=require("@lucid-evolution/lucid");var D=require("@lucid-evolution/lucid"),_=(e,t)=>{let r={type:"PlutusV2",script:t.minting},n=e.config().network,o=(0,D.validatorToRewardAddress)(n,r),s={type:"PlutusV2",script:t.spending},i=(0,D.validatorToAddress)(n,s);return{spendServiceValidator:s,spendServiceValAddress:i,mintServiceValidator:r,mintServiceValAddress:o}};var l=require("@lucid-evolution/lucid");function Le(e){return{type:"ok",data:e}}var ee=async(e,t,r)=>{let n=e.config().network,o={type:"PlutusV2",script:t},s=r?(0,l.validatorToAddress)(n,o,(0,l.keyHashToCredential)(r)):(0,l.validatorToAddress)(n,o);return e.utxosAt(s)},te=(e,t)=>{if(e)try{return{type:"right",value:l.Data.from(e,t)}}catch(r){return{type:"left",value:`invalid datum : ${r}`}}else return{type:"left",value:"missing datum"}},Be=async(e,t,r,n)=>{try{return(await ee(e,t,n)).flatMap(s=>{let i=te(s.datum,r);return i.type=="right"?{outRef:{txHash:s.txHash,outputIndex:s.outputIndex},datum:i.value,assets:s.assets}:[]})}catch{return[]}},De=e=>(0,l.applyDoubleCborEncoding)(e),Ne=async e=>{let t=(0,l.generateSeedPhrase)(),r=await(0,l.Lucid)(new l.Emulator([]),"Custom");r.selectWallet.fromSeed(t);let n=r.wallet().address;return{seedPhrase:t,address:n,assets:e}};function Ve(e){let{paymentCredential:t,stakeCredential:r}=(0,l.getAddressDetails)(e);if(!t)throw new Error("Not a valid payment address.");return{paymentCredential:t?.type==="Key"?{PublicKeyCredential:[t.hash]}:{ScriptCredential:[t.hash]},stakeCredential:r?{Inline:[r.type==="Key"?{PublicKeyCredential:[r.hash]}:{ScriptCredential:[r.hash]}]}:null}}function He(e,t){let r=(()=>"PublicKeyCredential"in e.paymentCredential?(0,l.keyHashToCredential)(e.paymentCredential.PublicKeyCredential[0]):(0,l.scriptHashToCredential)(e.paymentCredential.ScriptCredential[0]))(),n=(()=>{if(e.stakeCredential&&"Inline"in e.stakeCredential)return"PublicKeyCredential"in e.stakeCredential.Inline[0]?(0,l.keyHashToCredential)(e.stakeCredential.Inline[0].PublicKeyCredential[0]):(0,l.scriptHashToCredential)(e.stakeCredential.Inline[0].ScriptCredential[0])})();return(0,l.credentialToAddress)(t,r,n)}var Me=e=>{let t=(0,l.getAddressDetails)(e);if(!t.paymentCredential)return{type:"error",error:new Error("undefined paymentCredential")};let r=t.paymentCredential.type=="Key"?new l.Constr(0,[t.paymentCredential.hash]):new l.Constr(1,[t.paymentCredential.hash]);if(!t.stakeCredential)return{type:"ok",data:new l.Constr(0,[r,new l.Constr(1,[])])};let n=new l.Constr(0,[new l.Constr(0,[new l.Constr(0,[t.stakeCredential.hash])])]);return{type:"ok",data:new l.Constr(0,[r,n])}},Pe=(e,t)=>{let r=Math.ceil(e.length/t);return[...Array(r)].map((n,o)=>e.slice(o*t,(o+1)*t))},je=(e,t)=>typeof t=="bigint"?t.toString():t,$e=(e,t)=>1n+(e-1n)/t;function Fe(e,t){let r=Object.entries(t),n={...e};return r.forEach(([o,s])=>{n[o]?n[o]+=s:n[o]=s}),n}function qe(e){let t=new Map;e.lovelace&&t.set("",new Map([["",e.lovelace]]));let r=Object.keys(e);return Array.from(new Set(r.filter(o=>o!=="lovelace").map(o=>o.slice(0,56)))).sort().forEach(o=>{let s=r.filter(a=>a.slice(0,56)===o),i=new Map;s.sort().forEach(a=>{i.set(a.slice(56),e[a])}),t.set(o,i)}),t}function Ke(e){let t={lovelace:e.get("")?.get("")||BigInt(0)};for(let[r,n]of e)if(r!=="")for(let[o,s]of n)t[r+o]=s;return t}function We(e,t){let r=[],n=!1,o=new Map(Object.entries(t));for(let s of e)if(!s.scriptRef){n=!1;for(let[i,a]of o)if(Object.hasOwn(s.assets,i)){let u=s.assets[i];u>=a?o.delete(i):o.set(i,a-u),n=!0}if(n&&r.push(s),o.size==0)break}return o.size>0?{type:"error",error:new Error("Insufficient funds")}:{type:"ok",data:r}}function Xe(e,t){let r=e.concat(t),n=re(r),o=new Map;return n.forEach((s,i)=>{o.set(s.txHash+s.outputIndex,BigInt(i))}),e.flatMap(s=>{let i=o.get(s.txHash+s.outputIndex);return i!==void 0?i:[]})}function re(e){return e.sort((t,r)=>t.txHash<r.txHash?-1:t.txHash>r.txHash?1:t.txHash==r.txHash?t.outputIndex<r.outputIndex?-1:1:0)}function Ye(e){return e.map(t=>t.assets).reduce((t,r)=>(0,l.addAssets)(t,r),{})}function Je(e,t){for(let[r,n]of Object.entries(t))Object.hasOwn(e,r)&&(e[r]<n?delete e[r]:e[r]>n?e[r]-=n:delete e[r]);return e}var c=require("@lucid-evolution/lucid"),W=c.Data.Object({txHash:c.Data.Object({hash:c.Data.Bytes({minLength:32,maxLength:32})}),outputIndex:c.Data.Integer()}),ze=W,N=c.Data.Enum([c.Data.Object({PublicKeyCredential:c.Data.Tuple([c.Data.Bytes({minLength:28,maxLength:28})])}),c.Data.Object({ScriptCredential:c.Data.Tuple([c.Data.Bytes({minLength:28,maxLength:28})])})]),Ge=N,ne=c.Data.Object({paymentCredential:N,stakeCredential:c.Data.Nullable(c.Data.Enum([c.Data.Object({Inline:c.Data.Tuple([N])}),c.Data.Object({Pointer:c.Data.Tuple([c.Data.Object({slotNumber:c.Data.Integer(),transactionIndex:c.Data.Integer(),certificateIndex:c.Data.Integer()})])})]))}),Qe=ne,V=c.Data.Object({symbol:c.Data.Bytes(),name:c.Data.Bytes()},{hasConstr:!1}),Ze=V,oe=c.Data.Map(c.Data.Bytes(),c.Data.Map(c.Data.Bytes(),c.Data.Integer())),et=oe,se=c.Data.Object({output_reference:W,input_index:c.Data.Integer()}),w=se,ie=c.Data.Enum([c.Data.Literal("UpdateService"),c.Data.Literal("RemoveService")]),H=ie,ae=c.Data.Object({service_fee:V,service_fee_qty:c.Data.Integer(),penalty_fee:V,penalty_fee_qty:c.Data.Integer(),interval_length:c.Data.Integer(),num_intervals:c.Data.Integer(),minimum_ada:c.Data.Integer()}),T=ae,M={symbol:"",name:""};function X(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function tt(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function O(e,...t){if(!tt(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Y(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ce(e,t){O(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var ue=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));var J=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,rt=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function z(e){for(let t=0;t<e.length;t++)e[t]=rt(e[t])}var nt=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function de(e){O(e);let t="";for(let r=0;r<e.length;r++)t+=nt[e[r]];return t}var S={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function le(e){if(e>=S._0&&e<=S._9)return e-S._0;if(e>=S._A&&e<=S._F)return e-(S._A-10);if(e>=S._a&&e<=S._f)return e-(S._a-10)}function G(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let o=0,s=0;o<r;o++,s+=2){let i=le(e.charCodeAt(s)),a=le(e.charCodeAt(s+1));if(i===void 0||a===void 0){let u=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}n[o]=i*16+a}return n}function ot(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function j(e){return typeof e=="string"&&(e=ot(e)),O(e),e}function Q(...e){let t=0;for(let n=0;n<e.length;n++){let o=e[n];O(o),t+=o.length}let r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){let s=e[n];r.set(s,o),o+=s.length}return r}var P=class{clone(){return this._cloneInto()}},zt={}.toString;function pe(e){let t=n=>e().update(j(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function fe(e){let t=(n,o)=>e(o).update(j(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}var $=BigInt(4294967295),me=BigInt(32);function st(e,t=!1){return t?{h:Number(e&$),l:Number(e>>me&$)}:{h:Number(e>>me&$)|0,l:Number(e&$)|0}}function xe(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let o=0;o<e.length;o++){let{h:s,l:i}=st(e[o],t);[r[o],n[o]]=[s,i]}return[r,n]}var he=(e,t,r)=>e<<r|t>>>32-r,ye=(e,t,r)=>t<<r|e>>>32-r,ge=(e,t,r)=>t<<r-32|e>>>64-r,Se=(e,t,r)=>e<<r-32|t>>>64-r;var Ae=[],we=[],Te=[],it=BigInt(0),L=BigInt(1),at=BigInt(2),ct=BigInt(7),lt=BigInt(256),ut=BigInt(113);for(let e=0,t=L,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],Ae.push(2*(5*n+r)),we.push((e+1)*(e+2)/2%64);let o=it;for(let s=0;s<7;s++)t=(t<<L^(t>>ct)*ut)%lt,t&at&&(o^=L<<(L<<BigInt(s))-L);Te.push(o)}var[dt,pt]=xe(Te,!0),ve=(e,t,r)=>r>32?ge(e,t,r):he(e,t,r),_e=(e,t,r)=>r>32?Se(e,t,r):ye(e,t,r);function ft(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let i=0;i<10;i++)r[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){let a=(i+8)%10,u=(i+2)%10,x=r[u],d=r[u+1],g=ve(x,d,1)^r[a],p=_e(x,d,1)^r[a+1];for(let v=0;v<50;v+=10)e[i+v]^=g,e[i+v+1]^=p}let o=e[2],s=e[3];for(let i=0;i<24;i++){let a=we[i],u=ve(o,s,a),x=_e(o,s,a),d=Ae[i];o=e[d],s=e[d+1],e[d]=u,e[d+1]=x}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)r[a]=e[i+a];for(let a=0;a<10;a++)e[i+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=dt[n],e[1]^=pt[n]}r.fill(0)}var C=class extends P{constructor(t,r,n,o=!1,s=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=o,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,X(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ue(this.state)}keccak(){J||z(this.state32),ft(this.state32,this.rounds),J||z(this.state32),this.posOut=0,this.pos=0}update(t){Y(this);let{blockLen:r,state:n}=this;t=j(t);let o=t.length;for(let s=0;s<o;){let i=Math.min(r-this.pos,o-s);for(let a=0;a<i;a++)n[this.pos++]^=t[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:r,pos:n,blockLen:o}=this;t[n]^=r,r&128&&n===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){Y(this,!1),O(t),this.finish();let r=this.state,{blockLen:n}=this;for(let o=0,s=t.length;o<s;){this.posOut>=n&&this.keccak();let i=Math.min(n-this.posOut,s-o);t.set(r.subarray(this.posOut,this.posOut+i),o),this.posOut+=i,o+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return X(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ce(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:o,rounds:s,enableXOF:i}=this;return t||(t=new C(r,n,o,i,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=n,t.outputLen=o,t.enableXOF=i,t.destroyed=this.destroyed,t}},A=(e,t,r)=>pe(()=>new C(t,e,r)),rr=A(6,144,224/8),Oe=A(6,136,256/8),nr=A(6,104,384/8),or=A(6,72,512/8),sr=A(1,144,224/8),ir=A(1,136,256/8),ar=A(1,104,384/8),cr=A(1,72,512/8),be=(e,t,r)=>fe((n={})=>new C(t,e,n.dkLen===void 0?r:n.dkLen,!0)),lr=be(31,168,128/8),ur=be(31,136,256/8);var b={prefix100:"000643b0",prefix222:"000de140",prefix333:"0014df10",prefix444:"001bc280"},k=(e,t)=>{let r=Oe(G(e.txHash)),n=new Uint8Array([e.outputIndex]),o=Q(r,n),s=Q(G(t),o);return de(s.slice(0,32))};var B=require("effect"),ke=e=>{let t=k(e,b.prefix100),r=k(e,b.prefix222);return{refTokenName:t,userTokenName:r}},mt=async(e,t)=>{let r=await e.wallet().address(),n=_(e,t.scripts),o=(0,m.mintingPolicyToId)(n.mintServiceValidator);console.log("servicePolicyId: ",o);let s=await e.utxosAt(r);(!s||!s.length)&&console.error("No UTxO found at user address: "+r);let{refTokenName:i,userTokenName:a}=ke(s[0]);console.log("refTokenName: ",i),console.log("userTokenName: ",a);let u={kind:"selected",makeRedeemer:f=>{let F=s[0],R={output_reference:{txHash:{hash:F.txHash},outputIndex:BigInt(F.outputIndex)},input_index:f[0]};return console.log("createService :: ",m.Data.to(R,w)),m.Data.to(R,w)},inputs:s};console.log("REDEEMER :: ",u);let x={service_fee:M,service_fee_qty:10000000n,penalty_fee:M,penalty_fee_qty:1000000n,interval_length:1n,num_intervals:12n,minimum_ada:2000000n},d=m.Data.to(x,T),g={txHash:{hash:s[0].txHash},outputIndex:BigInt(s[0].outputIndex)},p={output_reference:g,input_index:g.outputIndex};console.log("merchantUTxOs :: ",s);let v={[`${o}${i}`]:1n,[`${o}${a}`]:1n};try{let f=await e.newTx().collectFrom(s).mintAssets(v,u).validTo(Date.now()+9e5).attach.MintingPolicy(n.mintServiceValidator).complete();return console.log("data: ",f.toJSON()),{type:"ok",data:f}}catch(f){return console.log("ERROR: ",f),f instanceof Error?{type:"error",error:f}:{type:"error",error:new Error(`${JSON.stringify(f)}`)}}},xt=async(e,t)=>B.Effect.gen(function*(){let r=yield*B.Effect.promise(()=>e.wallet().address()),n=_(e,t.scripts),o=(0,m.mintingPolicyToId)(n.mintServiceValidator);console.log("servicePolicyId: ",o);let s=yield*B.Effect.promise(()=>e.utxosAt(r));console.log("Merchant UTxO"),console.log(s),(!s||!s.length)&&console.error("No UTxO found at user address: "+r);let i=(0,m.selectUTxOs)(s,{lovelace:5000000n}),{refTokenName:a,userTokenName:u}=ke(i[0]);console.log("refTokenName: ",a),console.log("userTokenName: ",u);let x={[`${o}${a}`]:1n,[`${o}${u}`]:1n},d={kind:"selected",makeRedeemer:f=>m.Data.to(new m.Constr(0,[f])),inputs:i},g=yield*B.Effect.promise(()=>e.wallet().getUtxos()),p=(0,m.selectUTxOs)(g,{lovelace:BigInt(2e6)});return yield*e.newTx().mintAssets(x,d).pay.ToAddress(n.mintServiceValAddress,{[`${o}${a}`]:1n}).validTo(Date.now()+9e5).attach.MintingPolicy(n.mintServiceValidator).completeProgram()});var h=require("@lucid-evolution/lucid");var ht=async(e,t)=>{console.log("updateService..........: ");let r=await e.wallet().address(),n=_(e,t.scripts),o=(0,h.mintingPolicyToId)(n.mintServiceValidator);console.log("servicePolicyId: ",o);let s=await e.utxosAt(r);(!s||!s.length)&&console.error("No UTxO found at user address: "+r);let i=(0,h.toUnit)("0d7895b6e27a70a4175c822a1e792a2fdc59817f7f7773079044812f","000643b09e6291970cb44dd94008c79bcaf9d86f18b4b49ba5b2a04781db7199"),a=(0,h.toUnit)("0d7895b6e27a70a4175c822a1e792a2fdc59817f7f7773079044812f","000de1409e6291970cb44dd94008c79bcaf9d86f18b4b49ba5b2a04781db7199"),u=await e.utxosAtWithUnit(n.spendServiceValAddress,i);if(!u)throw new Error("Service NFT not found");console.log("serviceNFTUTxO: ",u);let x={kind:"selected",makeRedeemer:y=>{let R=s[0],Z={output_reference:{txHash:{hash:R.txHash},outputIndex:BigInt(R.outputIndex)},input_index:y[0]};return console.log("createService :: ",h.Data.to(Z,w)),h.Data.to(Z,w)},inputs:s},d={service_fee:t.new_service_fee,service_fee_qty:t.new_service_fee_qty,penalty_fee:t.new_penalty_fee,penalty_fee_qty:t.new_penalty_fee_qty,interval_length:t.new_interval_length,num_intervals:t.new_num_intervals,minimum_ada:t.new_minimum_ada},g=h.Data.to(d,T),p={txHash:{hash:s[0].txHash},outputIndex:BigInt(s[0].outputIndex)},v={output_reference:p,input_index:p.outputIndex},f=h.Data.to("UpdateService",H),F=h.Data.to("RemoveService",H);console.log("Redeemer updateService: ",f);try{let y=await e.newTx().collectFrom(s).collectFrom(u,f).pay.ToAddress(r,{[a]:1n}).attach.SpendingValidator(n.spendServiceValidator).complete();return console.log("data: ",y.toJSON()),{type:"ok",data:y}}catch(y){return console.log("ERROR: ",y),y instanceof Error?{type:"error",error:y}:{type:"error",error:new Error(`${JSON.stringify(y)}`)}}};var E=require("@lucid-evolution/lucid");var yt=36e5,gt=315576e5,St=631152e5,vt=864e5,_t=.05,At=process.env.NODE_ENV=="emulator"?0:1e5,wt="014e9d57e1623f7eeef5d0a8d4e6734a562ba32cf910244cd74e1680",Tt="5e8aa3f089868eaadf188426f49db6566624844b6c5d529b38f3b8a7";var Ot=e=>{let t=k(e,b.prefix100),r=k(e,b.prefix222);return{refTokenName:t,userTokenName:r}},bt=async(e,t)=>{console.log("sendTokenToService...");let r=_(e,t.scripts),n=(0,E.mintingPolicyToId)(r.mintServiceValidator),o=await e.wallet().address(),s=await e.utxosAt(o),i=await e.utxosAt(r.spendServiceValAddress),{refTokenName:a,userTokenName:u}=Ot(s[0]);console.log("Service Validator Address: BEFORE>>>",r.spendServiceValAddress),console.log("Service Validator UTxO: BEFORE>>>",i);let x={service_fee:t.service_fee,service_fee_qty:t.service_fee_qty,penalty_fee:t.penalty_fee,penalty_fee_qty:t.penalty_fee_qty,interval_length:t.interval_length,num_intervals:t.num_intervals,minimum_ada:t.minimum_ada},d=E.Data.to(x,T),g=(0,E.toUnit)(n,a);console.log("PolicyId: ",n),console.log("refTokenName: ",a),console.log("userTokenName: ",u);try{let p=await e.newTx().pay.ToContract(r.spendServiceValAddress,{kind:"inline",value:d},{lovelace:5000000n,[g]:1n}).complete();return console.log("data: ",p.toJSON()),{type:"ok",data:p}}catch(p){return console.log("ERROR: ",p),p instanceof Error?{type:"error",error:p}:{type:"error",error:new Error(`${JSON.stringify(p)}`)}}};U(I,require("@lucid-evolution/lucid"),module.exports);0&&(module.exports={ADA,AddressD,AddressSchema,AssetClassD,AssetClassSchema,CreateServiceRedeemer,CreateServiceSchema,CredentialD,CredentialSchema,MintAccountSchema,MintServiceRedeemer,ONE_HOUR_MS,ONE_YEAR_MS,OutputReference,OutputReferenceSchema,PROTOCOL_FEE,PROTOCOL_PAYMENT_KEY,PROTOCOL_STAKE_KEY,ServiceDatum,ServiceDatumSchema,TIME_TOLERANCE_MS,TWENTY_FOUR_HOURS_MS,TWO_YEARS_MS,Value,ValueSchema,chunkArray,createService,createServiceEffect,divCeil,fromAddress,fromAddressToData,fromAssets,generateAccountSeedPhrase,getInputUtxoIndices,getServiceMultiValidator,ok,parseSafeDatum,parseUTxOsAtScript,remove,replacer,selectUtxos,sendTokenToService,sortByOutRefWithIndex,sumUtxoAssets,toAddress,toAssets,toCBORHex,union,updateService,utxosAtScript,...require("@lucid-evolution/lucid")});
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
